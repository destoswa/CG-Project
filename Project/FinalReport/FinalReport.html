<!DOCTYPE html><html lang="en"><head>
	<meta charset="utf-8">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title> Project Proposal - Group 22 </title>
<style>
* {
	box-sizing: border-box;
}

body {
	width: 100%;
	padding: 0;
	padding-bottom: 10rem;
	margin: 0;
	border: 0;

	max-width: 55rem;
	margin-left: auto;
	margin-right: auto;

	font-family: sans-serif;
	font-size: 1.2rem;
	line-height: 160%;

	text-align: justify;
}

h1, h2, h3, h4, h5, h6, a
{
	/*margin-top: 0rem;
	 color: rgb(50, 90, 200); */
	color: hsl(14, 84%, 37%);

}

h3, h4, h5, h6 {
	font-weight: normal;
}

p{
	margin-left: 2em;
	margin-right: 1.5em;
	margin-top:	0.3em;
}

ul{
	margin-left : 1em;
	margin-top:	0.3em;
}

h3, h4, h5, h6 { 
	margin-left: 1em;
	margin-bottom:	0em;
}

h4 {
	margin-left: 1.7em;
}

ul {
	padding-left: 1.5em;
}

h2 {
	margin-top: 1.5em;

	width: 100%;
}

h1 { font-size: 2em; }
h2 { font-size: 1.75em; }
h3 { font-size: 1.4em; }
h4 { font-size: 1.05em; }

body > img {
	display: block;
	margin-left: auto;
	margin-right: auto;
}

figure {
	/* margin: 0.5rem; */
	margin-bottom: 2rem;
	margin-left: auto;
	margin-right: auto;
	
	width: 100%;
	max-width: 100%;

	display: flex;
	flex-flow: row;
	justify-content: space-around;
}

figure.captioned {
	flex-flow: column;
}

figcaption {
	margin: 0.5rem;
	width: 100%;
	max-width: 100%;

	max-height: 30rem;

	text-align: center;

	font-style: italic;
}

figure img {
	object-fit: contain;
	/*max-width: inherit;
	max-height: inherit;*/
}

figure.col2 {
	display: grid;
	grid-template-columns: 1fr 1fr;
	grid-column-gap: 1rem;
}

figure.col3 {
	display: grid;
	grid-template-columns: 1fr 1fr 1fr;
	grid-column-gap: 1rem;
}


img {
    margin: auto;
    width: 100%;
    /*max-width: 280px;
    max-height:100%*/
}

.column {
  float: left;
  flex: 33.33%;
  padding: 5px;
}

/* Clear floats after image containers */
.row::after {
  content: "";
  clear: both;
  display: flex;
  gap: 25px;
}

.sourceCode a {
	/* https://github.com/jgm/pandoc/issues/4386 */
	color: black;
	pointer-events: none;
	text-decoration: none;
}

</style>

<!-- <link rel="stylesheet" href="3rdparty/pseudocode.min.css">
<script src="3rdparty/pseudocode.min.js"></script>
<script src="3rdparty/katex/katex.min.js"></script> -->
<style type="text/css">
                            .mjpage .MJX-monospace {
                            font-family: monospace
                            }

                            .mjpage .MJX-sans-serif {
                            font-family: sans-serif
                            }

                            .mjpage {
                            display: inline;
                            font-style: normal;
                            font-weight: normal;
                            line-height: normal;
                            font-size: 100%;
                            font-size-adjust: none;
                            text-indent: 0;
                            text-align: left;
                            text-transform: none;
                            letter-spacing: normal;
                            word-spacing: normal;
                            word-wrap: normal;
                            white-space: nowrap;
                            float: none;
                            direction: ltr;
                            max-width: none;
                            max-height: none;
                            min-width: 0;
                            min-height: 0;
                            border: 0;
                            padding: 0;
                            margin: 0
                            }

                            .mjpage * {
                            transition: none;
                            -webkit-transition: none;
                            -moz-transition: none;
                            -ms-transition: none;
                            -o-transition: none
                            }

                            .mjx-svg-href {
                            fill: blue;
                            stroke: blue
                            }

                            .MathJax_SVG_LineBox {
                            display: table!important
                            }

                            .MathJax_SVG_LineBox span {
                            display: table-cell!important;
                            width: 10000em!important;
                            min-width: 0;
                            max-width: none;
                            padding: 0;
                            border: 0;
                            margin: 0
                            }

                            .mjpage__block {
                            text-align: center;
                            margin: 1em 0em;
                            position: relative;
                            display: block!important;
                            text-indent: 0;
                            max-width: none;
                            max-height: none;
                            min-width: 0;
                            min-height: 0;
                            width: 100%
                            }</style></head>

<body>

<h1>Project Proposal - Group 22</h1>
<p>Jad Sobhie, Swann Destouches, Alice Reymond</p>
<ul>
	<li><a href="#abstract">Abstract</a></li>
	<li><a href="#techapproach">Technical approach</a>
		<ul>
			<li><a href="#ta_movement">Movement</a>
				<ul>
					<li><a href="#ta_FPC">First Person Controller</a></li>
					<li><a href="#ta_BezierCurves">Bezier curves</a></li>
					<li><a href="#ta_FocusZones">Focus zones</a></li>
				</ul>
			</li>
			<li><a href="#ta_particleeffect">Particle effects</a></li>
			<li><a href="#ta_shader">Shader</a></li>
			<li><a href="#ta_lightning">Lightning</a></li>
			<li><a href="#ta_scene">Scene</a></li>
		</ul>
	</li>
	<li><a href="#results">Results</a>
		<ul>
			<li><a href="#res_movement">Movement</a>
				<ul>
					<li><a href="#res_FPC">First Person Controller</a></li>
					<li><a href="#res_BezierCurves">Bezier curves</a></li>
					<li><a href="#res_FocusZones">Focus zones</a></li>
				</ul>
			</li>
			<li><a href="#res_particleeffect">Particle effects</a></li>
			<li><a href="#res_shader">Shader</a></li>
			<li><a href="#res_lightning">Lightning</a></li>
			<li><a href="#res_scene">Scene</a></li>
		</ul>
	</li>
	<li><a href="#conclusion">Discussion and conclusion</a></li>
	<li><a href="#workload">Members contributions</a></li>
	<li><a href="#references">References</a></li>
	<ul>
		<li><a href="#assets">Downloaded Assets</a></li>
	</ul>

</ul>

<h2 id="abstract">Abstract</h2>
<h3>The Magic Guild</h3>
<p>
	We have created a small medieval fantasy shop, The Magic Guild, that the player can explore in first-person view.<br>
	The building is shaped in a way that it can be walked around in a cyclic path. The player can either manually move around using WASD hotkeys, or press Space to enter an automated trajectory.
	This trajectory follows a Bezier curve and focuses on the important displays of the shop.<br>
	The most interesting displays are spells created through particle systems and a cauldron brewing a potion under a firework.<br>
	Feel free to explore around! There are many pieces of decoration and some of them might even have amusing features...
</p>
<h2 id="techapproach">Technical approach</h2>
<h3 id="ta_movement">Movement</h3>
<p>Regarding the movement, the idea is to allow the player to explore the hut at their own rate or to let go of the command, sit back and enjoy a comfortable preset ride.</p>
<h4 id="ta_FPC">First Person Controller</h4>
<p>
	The idea regarding the motion of the camera is to be able to move freely in the scene, as if 
	the camera is a physical client of the shop. Moreover, the user should be able to enter a <i>spectator mode</i> which turns off
	the controls and makes the camera travel automatically through the scene.<br>
	The controls of the camera have been implemented by attaching it to a non-textural object with a <i>First Person Controller</i>
	script applied to the object. It can turn around and look up and down (body turns around (yaw) and camera goes up and down (pitch))
	following the movement of the mouse and it can move around using the controls W-A-S-D.<br>
</p>

<h4 id="ta_BezierCurves">Bezier curves</h4>
<p>
	Regarding the path that the camera is supposed to follow, it has been made by creating a system of linked Bezier curves with 
	an invisible target following it with a given speed (see video 1) and the user can then decide to follow the
	target by pressing the <i>space</i> bar (see video 2 and 3). When the player does so, the green target is teleported to the nearest
	position of the path to the player and a series of attractive, rejecting and wind forces are applied to the player so that it follows
	the target as smoothly as possible.
</p>

<h4 id="ta_FocusZones">Focus zones</h4>
<p>
	In order for the player to look at objects of interest whilst traveling along the bezier curves, we have implemented focus zones. Those zones
	consist of invisible cubes with a collider that is triggered when both player and target enter them. The effect is to change the object onwhich
	the player focuses. The speed of the target can also be changed.
</p>

<h3 id="ta_particleeffect">Particle effect</h3>
<p>
	All particle systems' behaviour is described through the two same scripts: <i>Particle System Behaviour</i> and <i>Particle Behaviour</i>.
	To be able to define different sorts of systems, each script has many different parameters, such as the particles life span, size, sprite image, colour, movement and more.<br>
	The <i>Particle System Behaviour</i> defines general parameters such as the particles spawning frequency and the shape of the starting point. It takes a particle <i>GameObject</i>
	as a variable and spawns instances of it, keeping track of the alive particles to update and deleting those that auto-destroyed after reaching the end of their lifetime.<br>
	The <i>Particle Behaviour</i> computes in run-time all the different modifications applied on one particle while it lives. The velocity, transparency, colour or even sprite itself might change before the particle dies.<br><br>
	Particles themselves are rendered in 3D space with a 2D sprite. At each update of the particle, the sprite is set to look at the camera to achieve the billboard effect.<br><br>
	Finally, we also have a <i>System Spawn</i> script, which takes a variant of a particle system and spawns instances of it at random. The frequency at which systems spawn and
	the size of the vertical plane in which they appear can be user-defined.<br>
	We used this system to create the fireworks, where each individual firework is a separate particle system.
</p>
<h3 id="ta_shader">Shader</h3>
<p>The goal is to create a cauldron with an animated liquid-like surface. A round surface with a high number of vertices was created on blender and a custom shader was added to it.
This custom shader was created by using a surface-type shader of Unity and re-defining the mesh shader. In order to create the effect, the coordinates of the vertices were expressed with respect to
the center of the surface and set to vary in time, following sinusoids-like functions.
</p>
<h3 id="ta_lightning">Lightning</h3>
<p>The lightning effect was done by creating a script that constructs a lightning object. Each of those objects consist of a set of segments of random sizes, having random angles between them and a
probability to branch on a new subset of lines. The generation of lightning is also randomized around a fixed a value. In order to make the lightning bloom, the <i>Post Processing</i> package of 
Unity is used in order to apply blooming effect to an emitive texture that is set to each lightning object.
</p>
<h3 id="ta_scene">Scene</h3>
<p>
	The scene was created in Unity, mostly using free assets from the unity asset store. Some had to be modified or custom created to fit the role better. Some assets had to be used creatively, such as the
	showcase alcoves that are in reality fireplaces, with the firewood covered by a piece of pavement. 
</p>

<h2 id="results">Results</h2>
<h3 id="res_movement">Movement</h3>
<h4 id="res_FPC">First Person Controller</h4>
	<p>
		A demo of the FPC is shown on video 1. As it can be seen, the camera is mounted on a capsule, the body. The mouvement, controlled by the keys W-A-S-D and the yaw rotation
		are affecting the body while the pitch rotation is affecting the camera.
	</p>
	<center><video width="80%" controls>
		<source src="video_FPC.mp4" type="video/mp4">
	</video></center>
	<p>Video 1 : Demo of the First Person Controller</p>
	
<h4 id="res_BezierCurves">Bezier curves</h4>
	<p>The Bezier curve setting process can be seen on video 2. As it can be seen, the implementation of the script as been made so that once it is
	applied to the parent object, the rendering of the curve is set automatically while the user create new points of control.</p>
	<center><video width="80%" controls>
		<source src="video_creation_bezier.mp4" type="video/mp4">
		Your brother does not support the video tag
	</video></center>
	<p>Video 2 : Demo of the creation of two Bezier curves and animation of the target running along the path.</p>

	<p>The videos 3 and 4 show how the transition from FPC to spectate mode. In the video 4, we can see that the target is independant from the player
	until the space bar is pressed. When the spectate mode is activated, the target will be teleported to the closest position from the player on the
	bezier curve and the set of forces that make the player follow it is enabled.</p>
	<center><video width="80%" controls>
		<source src="video_animation_cropped.mp4" type="video/mp4">
		Your brother does not support the video tag
	</video></center>
	<p>Video 3 : Demo of the camera moving around and then turning into spectate mode. The left screen shows the scene and the right screen shows
	the view of the camera during the demo. On the left screen, the player is shown in white and the target in green.</p>

	<center><video width="80%" controls>
		<source src="video_animation_zoom.mp4" type="video/mp4">
		Your brother does not support the video tag
	</video></center>
	<p>Video 4 : Zoom on the scene of Video 2.</p>

<h4 id="res_FocusZones">Focus zones</h4>
	<p>
	As shown on video 5, the focus zones consist in invisible cubes crossing the Bezier Path at desired location and forcing the target to slow down and the player to change its focus to a new object. Once the player
	leaves its focus zone, the target get its original speed back and the player look back at it. All changes of focus are proceeded smoothly with a configurable speed.
	</p>
	<center><video width="80%" controls>
		<source src="video_focus_zones.mp4" type="video/mp4">
		Your brother does not support the video tag
	</video></center>
	<p>Video 5 : Effect of the focus zone on the player and the target. The focus zones meshes are shown in light green on the right screen.</p>
<h3 id="res_particleeffect">Particle effect</h3>
	<p>
		Below are the different particle effects we managed to create.
	</p>
	<center><video width="80%" controls>
		<source src="fire.mp4" type="video/mp4">
	</video></center>
	<figcaption>Fire</figcaption>
	<p><br></p>
	<center><video width="80%" controls>
		<source src="snow.mp4" type="video/mp4">
	</video></center>
	<figcaption>Snow</figcaption>
	<p><br></p>
	<center><video width="80%" controls>
		<source src="stormy_cloud.mp4" type="video/mp4">
	</video></center>
	<figcaption>Stormy cloud</figcaption>
	<p><br></p>
	<center><video width="80%" controls>
		<source src="tornado.mp4" type="video/mp4">
	</video></center>
	<figcaption>Tornado</figcaption>
	<p><br></p>
	<center><video width="80%" controls>
		<source src="fireworks.mp4" type="video/mp4">
	</video></center>
	<figcaption>Fireworks</figcaption>
	<p><br></p>
	<p>
		Since all the particle systems are created with the same script, we need a lot of different parameters to tweak. This is why we have
		also overridden the Unity inspector with our own to make navigating between all the parameters easier. This also avoids errors that could have
		happened from modifying parameters that shouldn't be in some cases. <br>
		Here is what the new inspector looks like: 
	</p>
	<center><video width="40%" controls>
		<source src="inspector.mp4" type="video/mp4">
	</video></center>

<h3 id="res_shader">Shader</h3>
	<p>
		The video 5 shows the final results of the cauldron with the choice of a patern of waves converging to the center.
	</p>
	<center><video width="80%" controls>
		<source src="video_shader.mp4" type="video/mp4">
		Your brother does not support the video tag
	</video></center>
	<p>Video 5 : Vertex shader modification to create a liquid-like effect on the surface of a cauldron.</p>
	
<h3 id="res_lightning">Lightning</h3>
	<p>
		In video 6, the lightning effect without the clouds can be shown. 
	</p>
	<center><video width="80%" controls>
		<source src="video_lightning_effect.mp4" type="video/mp4">
		Your brother does not support the video tag
	</video></center>
	<p>Video 6 : Lightning effect demo. This video highlight the lightning without the clouds particle effect + the implementation of impact particle effect on the ground.</p>

	
<h3 id="res_scene">Scene</h3>
	<p>
		The original idea for the scene was an entrance hall connected to two corridors where the different spells would be showcased. These corridors would meet up in the end forming
		a U shape, thus allowing the player to visit the whole shop without having to backtrack needlessly. The final result is rather similar to the original concept. One of the main
		changes that were done was to make the corridor at the back of the hut. The addition of the cauldron and firework made it the perfect spot for a back-store party, turning it from a desert
		corridor into a propper part of the showcase. In that regard, the positionning of the spells and effects was also strategically placed to allow an interesting discovery flow during
		exploration and, while originally a single podium model was envisionned to be used for all spells, the alcoves were individually customised for each different particle system to a display that fits the
		theme of each individual spell. Eight alcoves were originally created in prevision of potential addiotional spells being created. In the end, we ended up with a total of four spells, so the
		remaining four alcoves had to be filled with random assortments of relics and pieces of decoration that fit the idea of something that one might find in a witch bazaar, to keep the place interesting
		and not have any empty space.
	</p>
	
	<center><img src="Title.png" alt="the title" style="width:80%;"></center>
	
<h2 id="conclusion">Discussion and Conclusion</h2>
<p>
	In conclusion, we are satisfied with the final project we managed to create. The result is close to the original idea that we had of a little fantasy shop.
	Even though we all worked on quite different aspects of the project, we easily managed to put everything together in the end, which reassures us in thinking
	that we have developped robust features.
</p>
<h2 id ="workload">Members contributions</h2>
<ul>
	<li> <b>Alice Reymond (1/3):</b> Particle systems, final video edit</li>
	<li> <b>Swann Destouches (1/3):</b> Controls, Bezier curves, Focus zones, Shader and Lightning</li>
	<li> <b>Jad Sobhie (1/3):</b> Scene design, asset creation</li>
</ul>
<h2 id="references">References</h2>
<ul>
	<li> Martin Allen, <i>no date</i>, <a href="https://web.cs.wpi.edu/~matt/courses/cs563/talks/psys.html" target="blank">Particle Systems</a></li>
	<li> Solomon Justin, 2023/12/29, <a href = "https://www.youtube.com/watch?v=Hl2L_rfOBaQ&t=871s" target="_blank">Introduction to Computer Graphics (Lecture 7): Particle systems, ODEs, and Euler's Method</a></li>
	<li> Greer Matt, 2012/11/21, <a href="http://buildnewgames.com/particle-systems/" target="blank">Particle Systems From the Ground Up</a></li>
	<li> Unity, 2023/05/25, <a href="https://docs.unity3d.com/ScriptReference/" target="blank">Unity Documentation</a></li>
	<li> Ronja's tutorial,2018/06/16 <a href="https://www.ronja-tutorials.com/post/015-wobble-displacement/" target="blank">Vertex Displacement</a></li>
	<li> JhonnyDev, 2022/08/02, <a href="https://www.youtube.com/watch?v=Ok_nEYfpWqI" target="blank">Controlleur à la 1ère Personne Unity 3D</a></li>
</ul>
<h3 id="assets">Downloaded Assets</h3>
<ul>
	<li><a href="http://www.effecthub.com/item/318235" target="blank">Cloud particle sprite</a></li>
</ul>

</body>